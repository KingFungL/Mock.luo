@{
    Layout = "~/Views/Shared/_LayoutBlog.cshtml";
    ViewBag.Title = "、天上有木月 个人博客-小小程序员，信仰低调！";
}
@section css{
    <style>
    </style>
}

<div class="container" style="margin-top:80px;" id="v-app">
    <div class="row">
        <div class="col-xs-12 col-md-8">
            <!--轮播图片-->
            <div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
                <!-- Indicators -->
                <ol class="carousel-indicators">
                    <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
                    <li data-target="#carousel-example-generic" data-slide-to="1"></li>
                    <li data-target="#carousel-example-generic" data-slide-to="2"></li>
                </ol>

                <!-- Wrapper for slides -->
                <div class="carousel-inner" role="listbox">
                    <div class="item active">
                        <img src="~/Content/Images/1.jpg">
                        <div class="carousel-caption">
                            <div class="banner-word">
                                <h4>个人博客</h4>
                                <p>渡人如渡己，渡已，亦是渡人</p>
                            </div>
                        </div>
                    </div>
                    <div class="item">
                        <img src="~/Content/Images/2.jpg">
                        <div class="carousel-caption">
                            <div class="banner-word">
                                <h4> 、天上有木月</h4>
                                <p>-“当你发现自己的才华撑不起野心时，就请安静下来学习吧。”</p>
                            </div>
                        </div>
                    </div>
                    <div class="item">
                        <img src="~/Content/Images/3.jpg">
                        <div class="carousel-caption">
                            <div class="banner-word">
                                <h4>、天上有木月 </h4>
                                <p>-“你如今的气质里，藏着你走过的路，读过的书，和爱过的人。”</p>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Controls -->
                <a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
                    <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
                    <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
            <!--main-inner start-->
            <div class="main-inner">
                @{
                    List<ArtDetailDto> LatestArticles = ViewData["LatestArticles"] as List<ArtDetailDto>;
                    foreach (var item in LatestArticles)
                    {
                        <div class="flbox">
                            <article class="post">
                                <figure class="thumbnail box-hide box-show">
                                    <a href="/App/Detail/@item.Id">
                                        <img src="@item.thumbnail" alt="@item.Title">
                                    </a>
                                </figure>
                                <span class="new-ico">NEW</span>
                                <header class="entry-header">
                                    <h4 class="entry-title">
                                        <a href="/App/Detail/@item.Id">@item.Title</a>
                                    </h4>
                                </header>
                                <div class="entry-content">
                                    <span class="entry-meta">
                                        <span class="date" data-toggle="tooltip" title="@item.CreatorTime">
                                            <i class="fa fa-clock-o"></i>
                                            &nbsp;@item.TimeSpan
                                        </span>
                                        @if (item.TypeCode.IsNotNullOrEmpty())
                                        {
                                            <span class="cat">
                                                <i class="fa fa-folder"></i>&nbsp;
                                                <a href="/app/category?category=@item.TypeCode" target="_blank">@item.TypeName</a>
                                            </span>
                                        }
                                        <span class="views">
                                            <i class="fa-user fa">
                                            </i>&nbsp;
                                            <a href="/@item.CreatorUserId/" data-toggle="tooltip" title="由 @item.NickName 发布">
                                                @item.NickName
                                            </a>
                                        </span> <span class="comment">
                                            <i class="fa fa-comment">
                                            </i>&nbsp;
                                            <a href="/App/Detail/@item.Id#author-comment">@item.CommentQuantity 条评论</a>
                                        </span>
                                    </span>
                                    <br>
                                    <div class="archive-content" >
                                      @item.Excerpt
                                        @* 摘要 *@
                                    </div>
                                    @*<script>
                                            var content = decodeURIComponent('@item.Content');
                                            $('.content-@item.Id').html(content);
                                        </script>*@
                                    <div class="clear">

                                    </div>
                                </div>
                            </article>
                        </div>
                    }
                }

            </div>
            <!--main-inner end-->
        </div>
        <div class="col-xs-12 col-md-4">
            <div class="author-info-widget">
                <div class="author-info-widget-img">
                    <img src="~/Content/Images/mo.jpg" class="img-responsive img-circle center-block" alt="侧栏个人头像" style="width:120px;">
                </div>
                <div class="text-center">
                    <h4>、天上有木月</h4>
                    <ul class="clearfix">
                        <li>
                            <a href="http://weibo.com/1820059022/profile?topnav=1&wvr=6" target="_blank" data-toggle="tooltip" title="微博:、如莫" rel="external nofollow"><i class="fa fa-weibo fa-lg"></i></a>
                        </li>
                        <li>
                            <a href="https://github.com/luoyunchong" target="_blank" data-toggle="tooltip" title="github：Mock.Luo"><i class="fa fa-github fa-lg"></i></a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" target="_blank" data-toggle="tooltip" v-on:click="show_info('weixin.png')" title="微信:点我扫码"><i class="fa fa-weixin fa-lg"></i></a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" target="_blank" data-toggle="tooltip" v-on:click="show_info('tim.jpg')" title="QQ:710277267"><i class="fa fa-qq fa-lg"></i></a>
                        </li>
                    </ul>
                </div>
                <div class="author-info-widget-words-main">
                    <span>-“你如今的气质里，藏着你走过的路，读过的书，和爱过的人”;</span>
                </div>
                <div class="author-info-widget-marker"></div>
            </div>

            @{Html.RenderPartial("TagHtml", ViewData["Tag"]); }

            @using Mock.Data.Models;
            <aside class="widget fadeInUp" data-wow-delay="0.3s">
                <h3 class="widget-title">点击排行</h3>
                <div id="hot_article" class="hot_article">
                    <ul>
                        @{
                            List<Article> HotArticles = ViewData["HotArticles"] as List<Article>;
                            string li_number = "li-number";
                            int i = 0;
                            foreach (var item in HotArticles)
                            {
                                if (i == 3)
                                {
                                    li_number += "s";
                                }
                                i++;
                                <li>
                                    <span class="hotp-title"><span class="@li_number">@i</span><a href="/App/Detail/@item.Id" rel="bookmark" style="margin-left: 0px;">@item.Title</a></span>
                                </li>
                            }
                        }
                    </ul>
                </div>
                <div class="clear"></div>
            </aside>

            @{Html.RenderPartial("LatestArticles", ViewData["LatestArticles"]); }


            @using Mock.Data.Dto;
            <aside class="widget fadeInUp" data-wow-delay="0.3s">
                <h3 class="widget-title">最新吐槽</h3>
                <div class="hot_article message-widget">
                    <ul>
                        @{
                            List<ReplyDto> SpitslotList = ViewData["SpitslotList"] as List<ReplyDto>;
                            foreach (var item in SpitslotList)
                            {
                                <li>
                                    <a href="/App/Detail/@item.AId#anchor-comment-@item.Id" data-toggle='tooltip' title="@item.ArticleTitle" rel="external nofollow">
                                        <img alt="" src="@item.Avatar" class="avatar avatar-64" width="64" height="64">						<span class="comment_author"><strong>@item.NickName</strong></span>
                                        <span v-html="com.decodeText('@item.Text')"></span>
                                    </a>
                                </li>
                            }
                        }
                    </ul>
                </div>

                <div class="clear"></div>
            </aside>

            <aside class="widget fadeInUp" data-wow-delay="0.3s" id="divStatistics">
                <h3 class="widget-title">站点信息</h3>
                @{ SiteStatistics site = ViewData["Site"] as SiteStatistics;}
                <ul class="divStatistics">
                    <li>文章总数:@site.ArticleCount</li>
                    <li>点赞总数:@site.PointViewCount</li>
                    <li>类型总数:@site.ArticleTypeCount</li>
                    <li>标签总数:@site.TagCount</li>
                    <li>评论总数:@site.ReplyCount</li>
                    <li>浏览总数:@site.ViewHitCount</li>
                </ul>
                <div class="clear"></div>
            </aside>
        </div>
    </div>
    <div class="row">

        @{ List<ArtDetailDto> FellLifeList = ViewData["FellLife"] as List<ArtDetailDto>;
            ArticleDto fell = new ArticleDto { };
            if (FellLifeList.Count > 0)
            {
                fell = FellLifeList[0];
            }
        }
        @if (FellLifeList.Count > 0)
        {
            <div class="col-md-6">
                <div class="cat-box fadeInUp" data-wow-delay="0.3s">
                    <h3 class="cat-title"><a href="/App/Category?category=@fell.TypeCode"><i class="fa fa-heartbeat"></i>@fell.TypeName<i class="fa fa-angle-right"></i></a></h3>
                    <div class="clear"></div>
                    <div class="cat-site">
                        <h4 class="entry-title"><i class="fa fa-angle-right"></i><a href="/App/Detail/@fell.Id" rel="bookmark">@fell.Title</a></h4>						<figure class="thumbnail"><a href="/App/Detail/@fell.Id"><img src="@fell.thumbnail" alt="@fell.Title"></a></figure>
                        <div class="cat-main">
                            @Html.Raw(fell.Excerpt)
                        </div>
                        <div class="clear"></div>

                        <ul class="cat-list">
                            @{
                                for (int j = 1; j < FellLifeList.Count; j++)
                                {
                                    <li class="list-date">@FellLifeList[j].CreatorTime.ToDateTime().ToString("yyyy/MM/dd")</li>
                                    <li class="list-title"><i class="fa fa-angle-right"></i><a href="/App/Detail/@FellLifeList[j].Id">@FellLifeList[j].Title</a></li>
                                }
                            }
                        </ul>
                    </div>
                </div>
            </div>
                                }
        @{ List<ArtDetailDto> funcList = ViewData["JustFun"] as List<ArtDetailDto>;
            ArticleDto func = new ArticleDto { };
            if (funcList.Count > 0)
            {
                func = funcList[0];
            }
        }
        @if (funcList.Count > 0)
        {
            <div class="col-md-6">
                <div class="cat-box wow fadeInUp" data-wow-delay="0.3s">
                    <h3 class="cat-title"><a href="/App/Category?category=@fell.TypeCode"><i class="fa fa-heartbeat"></i>轻松时刻<i class="fa fa-angle-right"></i></a></h3>
                    <div class="clear"></div>
                    <div class="cat-site">
                        <h4 class="entry-title"><i class="fa fa-angle-right"></i><a href="/app/detail/@func.Id" rel="bookmark">@func.Title</a></h4><figure class="thumbnail"><a href="/app/detail/@func.Id"><img src="@func.thumbnail" alt="@func.Title"></a></figure>
                        <div class="cat-main">
                            @Html.Raw(func.Excerpt)
                        </div>
                        <div class="clear"></div>
                        <ul class="cat-list">
                            @{
                                for (int j = 1; j < funcList.Count; j++)
                                {
                                    <li class="list-date">@funcList[j].CreatorTime.ToDateTime().ToString("yyyy/MM/dd")</li>
                                    <li class="list-title" ><i class="fa fa-angle-right"></i><a href="/App/Detail/@funcList[j].Id">@funcList[j].Title</a></li>
                                }
                            }
                        </ul>
                    </div>
                </div>
            </div>
                                }

    </div>
</div>



@section scripts{
    <script>
        $(function () {
            $('.scroll-c').css('display', 'none');
        });


        var vm = new Vue({
            el: '#v-app',
            data: {},
            mounted: function () {
                this.init_tooltip()
            },
            methods: {
                get_article: function () {
                    com.ajax({
                        url: '/Plat/Article/GetDataGrid'
                    });
                },
                init_tooltip: function () {
                    $("[data-toggle='tooltip']").tooltip();
                },
                show_info: function (img) {
                    var img_url = '/Content/Images/' + img ;

                    var json = {
                        "title": "", //相册标题
                        "id": 123, //相册id
                        "start": 0, //初始显示的图片序号，默认0
                        "data": [   //相册包含的图片，数组格式
                            {
                                "alt": img,
                                "src": img_url, //原图地址
                                "thumb": img_url //缩略图地址
                            }
                        ]
                    };
                    layer.photos({
                        photos: json
                        , anim:0 //0-6的选择，指定弹出图片动画类型，默认随机（请注意，3.0之前的版本用shift参数）
                    });

                }
            }
        });
    </script>
}