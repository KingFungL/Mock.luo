@{
    Layout = "~/Views/Shared/_Index.cshtml";
    ViewBag.Title = "日志列表";
}
<section class="content-header">
    <ol class="breadcrumb" style="margin-bottom:0px;">
        <li><a href="#"><i class="fa fa-dashboard"></i> 系统管理</a></li>
        <li class="active">系统日志</li>
    </ol>
</section>

<div class="layui-fluid" style="margin-top:20px;" id="v-app">
    <div id="toolbar" class="btn-group" style="margin-bottom:15px;">
        <button type="button" class="btn btn-default" v-on:click="btn_refresh">
            <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span>刷新
        </button>
    </div>
    <table id="dginfo"></table>
</div>

@section css{
}
@section scripts{
    <script>
        var vm = new Vue({
            el: '#v-app',
            mounted: function () {
                this.init_datagrid();
            },
            methods: {
                init_datagrid: function () {
                    $('#dginfo').dataGrid({
                        url: '/Plat/LogInfo/GetDataGrid',
                        sortOrder: "desc",
                        search: true,
                        sortName: 'LogID',
                        queryParams: function (params) {
                            return params;
                        },
                        columns: [{ checkbox: true },
                            { field: 'Logger', title: '日志产生地', sortable: true },
                            { field: 'Message', title: '日志内容' },
                            { field: 'LogLevel', title: '日志层级', sortable: true },
                            { field: 'LogDate', title: '产生日期', sortable: true, align: 'center' },
                            { field: 'Thread', title: '线程名', sortable: true },
                            { field: 'Exception', title: '异常信息', align: 'center' }
                        ],
                        callback: function () {
                            $('.pull-right.search .form-control').attr('placeholder', '输入日志内容');
                        }
                    });
                },
                btn_refresh: function () {
                    $('#dginfo').bootstrapTable("refresh");
                }
            }
        });
    </script>

}